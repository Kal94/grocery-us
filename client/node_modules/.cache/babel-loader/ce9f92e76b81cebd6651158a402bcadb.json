{"ast":null,"code":"var _jsxFileName = \"/Users/ava/grocery-us/client/src/pages/checkout/checkout.component.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport CustomButton from '../../components/custom-button/custom-button.component';\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser } from '../../redux/user/user.selectors';\nimport { selectCartTotal } from '../../redux/cart/cart.selectors';\nimport { loadStripe } from '@stripe/stripe-js';\nimport './checkout.styles.scss';\n\nconst fetchCheckoutSession = total => {\n  return axios({\n    url: 'create-checkout-session',\n    method: 'post',\n    data: {\n      total\n    }\n  }).then(response => {\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n    alert('There was an error, please try again.');\n  });\n};\n\nconst CheckoutPage = ({\n  currentUser,\n  cartTotal,\n  ...props\n}) => {\n  const [stripe, setStripe] = useState('');\n  const {\n    date,\n    time\n  } = props.location.state;\n  var text = '';\n  var deliveryCharge;\n\n  if (time === '9') {\n    text = '9am - 12pm';\n    deliveryCharge = 5.99;\n  } else if (time === '12') {\n    text = '12pm - 3pm';\n    deliveryCharge = 6.99;\n  } else {\n    text = '3pm - 6pm';\n    deliveryCharge = 4.99;\n  }\n\n  const subtotal = cartTotal / 100;\n  const total = subtotal + deliveryCharge;\n  const {\n    name,\n    address1,\n    address2,\n    towncity,\n    postcode\n  } = currentUser;\n  useEffect(() => {\n    setStripe(loadStripe('pk_test_nkamFPmhbTP1Lk9PY3SzRJc300ieyuyDpH'));\n  }, []);\n\n  const handleClick = event => {\n    fetchCheckoutSession(total).then(data => {\n      const {\n        sessionId\n      } = data;\n      console.log(sessionId);\n      const {\n        error\n      } = stripe.redirectToCheckout({\n        sessionId\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8 mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"basket\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"checkout-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, \"Checkout\"), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"Customer details\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, name), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, address1), address2 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 41\n    }\n  }, address2) : null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, towncity), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, postcode), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, \"Scheduled for delivery on\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, date), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, \"between \", text), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, \"Subtotal : \\xA3\", subtotal.toFixed(2)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, \"Delivery Charge : \\xA3\", deliveryCharge), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"shipping-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 61\n    }\n  }, \"Total Charge : \\xA3\", total.toFixed(2))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(CustomButton, {\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, \"Pay \", total.toFixed(2))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  })))));\n};\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  cartTotal: selectCartTotal\n});\nexport default connect(mapStateToProps)(CheckoutPage);","map":{"version":3,"sources":["/Users/ava/grocery-us/client/src/pages/checkout/checkout.component.jsx"],"names":["React","useEffect","useState","connect","axios","CustomButton","createStructuredSelector","selectCurrentUser","selectCartTotal","loadStripe","fetchCheckoutSession","total","url","method","data","then","response","catch","error","console","log","alert","CheckoutPage","currentUser","cartTotal","props","stripe","setStripe","date","time","location","state","text","deliveryCharge","subtotal","name","address1","address2","towncity","postcode","handleClick","event","sessionId","redirectToCheckout","toFixed","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios'\nimport CustomButton from '../../components/custom-button/custom-button.component'\nimport { createStructuredSelector } from 'reselect';\nimport { selectCurrentUser } from '../../redux/user/user.selectors';\nimport { selectCartTotal } from '../../redux/cart/cart.selectors';\n\nimport { loadStripe } from '@stripe/stripe-js'\n\nimport './checkout.styles.scss';\n\nconst fetchCheckoutSession = (total) => {\n    return axios({\n        url: 'create-checkout-session',\n        method: 'post',\n        data: {\n            total\n        }\n    }).then(response => {\n        return response.data\n    }).catch(error => {\n        console.log(error);\n        alert('There was an error, please try again.')\n    });\n}\n\nconst CheckoutPage = ({ currentUser, cartTotal, ...props }) => {\n\n    const [stripe, setStripe] = useState('');\n\n    const {date, time} = props.location.state\n\n    var text = ''\n    var deliveryCharge\n\n    if(time === '9'){\n        text = '9am - 12pm'\n        deliveryCharge = 5.99\n    } else if(time === '12'){\n        text = '12pm - 3pm'\n        deliveryCharge = 6.99\n    } else {\n        text = '3pm - 6pm'\n        deliveryCharge = 4.99\n    }\n\n    const subtotal = (cartTotal/100)\n    const total = subtotal + deliveryCharge\n\n    const { name, address1, address2, towncity, postcode } = currentUser\n\n    useEffect(() => {\n       setStripe(loadStripe('pk_test_nkamFPmhbTP1Lk9PY3SzRJc300ieyuyDpH'))\n    }, [])\n\n    const handleClick = (event) => {\n        fetchCheckoutSession(total).then(data => {\n            const { sessionId } = data\n            console.log(sessionId)\n            const {error} = stripe.redirectToCheckout({\n                sessionId\n            })\n        })\n    }\n    \n    return (\n        <div className=\"checkout-page\">\n            <div className=\"container\">\n                    <div className=\"row\">\n                    <div className=\"col-2\"></div>\n                    <div className=\"col-8 mt-5\">\n                        <div className=\"basket\">\n                            <h3 className=\"checkout-header\">Checkout</h3>\n                            <h4>Customer details</h4>\n                            <p className=\"shipping-details\">{name}</p>\n                            <p className=\"shipping-details\">{address1}</p>\n                            {address2 ? <p className=\"shipping-details\">{address2}</p> : null}\n                            <p className=\"shipping-details\">{towncity}</p>\n                            <p className=\"shipping-details\">{postcode}</p>\n                            <br />\n                            <h4>Scheduled for delivery on</h4>\n                            <p className=\"shipping-details\">{date}</p>\n                            <p className=\"shipping-details\">between {text}</p>\n                            <br />\n                            <h4>Total</h4>\n                            <p className=\"shipping-details\">Subtotal : £{subtotal.toFixed(2)}</p>\n                            <p className=\"shipping-details\">Delivery Charge : £{deliveryCharge}</p>\n                            <p className=\"shipping-details\"><b>Total Charge : £{total.toFixed(2)}</b></p>\n                            <br />\n                            <CustomButton onClick={handleClick}>Pay {total.toFixed(2)}</CustomButton>\n                    </div>\n                    <div className=\"col-2\">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    )\n}\n\nconst mapStateToProps = createStructuredSelector({\n    currentUser: selectCurrentUser,\n    cartTotal: selectCartTotal\n});\nexport default connect(mapStateToProps)(CheckoutPage);"]},"metadata":{},"sourceType":"module"}